(function(t){function e(e){for(var s,o,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;i.push([1,"chunk-vendors"]),a()})({0:function(t,e){},"034f":function(t,e,a){"use strict";var s=a("64a9"),r=a.n(s);r.a},"0c36":function(t,e,a){},"0d64":function(t,e,a){t.exports=a.p+"img/banner2.d88801d1.jpg"},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},3:function(t,e){},"302c":function(t,e,a){t.exports=a.p+"img/riscocaixa.5777b301.png"},"38b6":function(t,e,a){},4212:function(t,e,a){},"438d":function(t,e,a){t.exports=a.p+"img/logo-pdo-azul.f06e9a4a.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"cabecalho"},[s("img",{attrs:{alt:"PDO logo",src:a("438d")}}),s("div",{staticClass:"canto"},[-1==t.local.indexOf("www.gigovvt")&&-1==t.local.indexOf("localhost:8082")?s("div",{staticClass:"botaodoacao",attrs:{"bg-variant":"warning"}},[s("span",[t._v("Ajude a manter o site atualizado e funcionando doando um valor clicando no botão.")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-multi-1",modifiers:{"modal-multi-1":!0}}],staticClass:"mt-3",attrs:{"text-danger":"",size:"sm",pill:"",variant:"warning"}},[t._v("Doar")])],1):t._e(),s("img",{attrs:{alt:"PDO logo",src:a("bc5c")}})])]),s("b-modal",{attrs:{id:"modal-multi-1",size:"lg","body-bg-variant":"info","footer-bg-variant":"info","header-bg-variant":"info",title:"Escolha uma das opções de doação abaixo","body-text-variant":"light","header-text-variant":"light",centered:"","modal-ok":""}},[s("div",{staticClass:"doacao"},[s("div",{staticClass:"paypal"},[s("h3",[t._v("Paypal")]),s("form",{attrs:{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",target:"_top"}},[s("input",{attrs:{type:"hidden",name:"cmd",value:"_s-xclick"}}),s("input",{attrs:{type:"hidden",name:"hosted_button_id",value:"R2WRWGCUQNSBL"}}),s("input",{attrs:{type:"image",src:"https://www.paypalobjects.com/pt_BR/BR/i/btn/btn_donateCC_LG.gif",border:"0",name:"submit",title:"PayPal - The safer, easier way to pay online!",alt:"Faça doações com o botão do PayPal"}}),s("img",{attrs:{alt:"",border:"0",src:"https://www.paypal.com/pt_BR/i/scr/pixel.gif",width:"1",height:"1"}})])]),s("div",{staticClass:"pagseguro"},[s("h3",[t._v("PagSeguro")]),s("form",{attrs:{action:"https://pagseguro.uol.com.br/checkout/v2/donation.html",method:"post"}},[s("input",{attrs:{type:"hidden",name:"currency",value:"BRL"}}),s("input",{attrs:{type:"hidden",name:"receiverEmail",value:"carlosfredericodemborges@gmail.com"}}),s("input",{attrs:{type:"hidden",name:"iot",value:"button"}}),s("input",{attrs:{type:"image",src:"https://stc.pagseguro.uol.com.br/public/img/botoes/doacoes/120x53-doar-azul.gif",name:"submit",alt:"Pague com PagSeguro - é rápido, grátis e seguro!"}})])]),s("div",{staticClass:"picpay"},[s("h3",[t._v("PicPay")]),s("img",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-multi-2",modifiers:{"modal-multi-2":!0}}],attrs:{src:a("a6f6"),alt:""}})])])]),s("b-modal",{attrs:{id:"modal-multi-2",title:"Doar com PicPay","ok-only":"",centered:""}},[s("div",{staticClass:"qr-picpay"},[s("img",{attrs:{src:a("626a5"),alt:""}})])]),s("div",{staticClass:"conteudo"},[s("div",{staticClass:"params"},[s("keep-alive",[s("Params")],1)],1),s("div",{ref:"grid",staticClass:"grid"},[s("keep-alive",[s("Grid")],1)],1)]),s("div",{staticClass:"rodape"},[s("keep-alive",[s("Rodape")],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],staticClass:"browser"},[t._m(0),s("p",[t._v("Voce está navegando com o "+t._s(t.browser.name)+" na versão "+t._s(t.browser.version))]),s("p",[t._v("Este aplicativo funciona melhor no navegadores/versões abaixo")]),s("p",[t._v("- Chrome acima da versão 62")]),s("p",[t._v("- Firefox acima da versão 58")]),s("p",[t._v("- Opera acima da versão 61")]),t.local.indexOf("www.gigovvt")>-1||t.local.indexOf("localhost:8082")>-1?s("p",[t._v("Voce pode baixar o Chrome na Central de Software, ou atualizar seu Firefox abrindo um chamado no servicos.caixa")]):t._e(),s("p",[t._v("Esses navegadores com versões anteriores à estas irão apresentar imcompatibilidades")]),s("p",[t._v("Os navegadores Safari, Edge e InternetExplorer vão apresentar problemas em todas as versões.")]),s("b-form-checkbox",{staticStyle:{"font-size":"35px"},attrs:{size:"lg"},on:{change:function(e){return t.guardaAlerta()}},model:{value:t.mostraAlerta,callback:function(e){t.mostraAlerta=e},expression:"mostraAlerta"}},[t._v("Não mostrar esta mensagem novamente")]),s("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"warning"},on:{click:function(e){t.showAlert=!1}}},[t._v("Sair")])],1),s("div",{staticClass:"banner"},[t.local.indexOf("www.gigovvt")>-1||t.local.indexOf("localhost:8082")>-1?s("div",[s("img",{attrs:{src:a("62f2"),alt:""}}),s("img",{attrs:{src:a("6ff5"),alt:""}}),s("img",{attrs:{src:a("302c"),alt:""}})]):s("div",[s("img",{attrs:{src:a("ba57"),alt:""}}),s("img",{attrs:{src:a("0d64"),alt:""}}),s("img",{attrs:{src:a("8c21"),alt:""}})])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"center",width:"100%"}},[a("strong",[t._v("Atenção !")])])}],o=(a("7f7f"),a("4917"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"conteudoParams"},[a("div",{staticClass:"campos"},[a("div",{staticClass:"field",attrs:{title:"Seleciona UF"}},[t._v("\n      UF: \n      "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.params.UF,expression:"params.UF",modifiers:{lazy:!0}}],attrs:{type:"text"},domProps:{value:t.params.UF},on:{change:[function(e){return t.$set(t.params,"UF",e.target.value)},function(e){return t.saveParams()}]}})]),a("div",{staticClass:"field",attrs:{title:"Define BDI"}},[t._v("\n      BDI: \n      "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.params.BDI,expression:"params.BDI",modifiers:{lazy:!0}}],attrs:{type:"number",step:"0.01",min:"0",max:"80"},domProps:{value:t.params.BDI},on:{change:[function(e){return t.$set(t.params,"BDI",e.target.value)},function(e){return t.saveParams()}]}})]),a("div",{staticClass:"field",staticStyle:{position:"relative"},attrs:{title:"Seleciona Data Base Disponível"}},[t._v("\n      Data Base: \n      "),a("b-form-select",{attrs:{options:t.registros},on:{change:function(e){return t.saveParams()}},model:{value:t.params.base,callback:function(e){t.$set(t.params,"base",e)},expression:"params.base"}})],1),a("div",{staticClass:"field"},[a("b-form-checkbox",{attrs:{switch:"",variant:"danger",value:"1","unchecked-value":"0"},nativeOn:{change:function(e){return t.saveParams()}},model:{value:t.params.desonerado,callback:function(e){t.$set(t.params,"desonerado",e)},expression:"params.desonerado"}},[t._v("Desonerado")])],1),a("div",{staticClass:"field"},[a("div",{attrs:{title:"Curva ABC"}},[a("i",{staticClass:"fa fa-bar-chart fa-2x",on:{click:function(e){return t.curvaABC()}}})]),a("div",{attrs:{title:"Totaliza Planilha"}},[a("i",{staticClass:"fa fa-calculator fa-2x",on:{click:function(e){return t.totalizaItens()}}})])])]),a("div",{staticClass:"acoesParams"},[a("div",{attrs:{title:"Importa Planilha .xlsx"},on:{click:function(e){return t.escolheArquivo()}}},[a("i",{staticClass:"fa fa-long-arrow-up text-success fa-2x"}),a("i",{staticClass:"fa fa-file-excel-o text-success fa-2x"})]),a("div",{attrs:{title:"Exporta em formato .xlsx"},on:{click:function(e){return t.onexport(t.itens)}}},[a("i",{staticClass:"fa fa-file-excel-o fa-2x text-success"}),a("i",{staticClass:"fa fa-long-arrow-down text-success fa-2x"})]),a("div",{attrs:{title:"Limpa Planilha"},on:{click:function(e){return t.limpaPlanilha()}}},[a("i",{staticClass:"fa fa fa-trash fa-2x text-danger",attrs:{"aria-hidden":"true"}})])]),a("b-modal",{attrs:{id:"modal-2",size:"xl","hide-footer":"",centered:"",title:"Carrega Planilha .xlsx"}},[a("div",{staticClass:"d-block",staticStyle:{"text-align":"center !important"}},[a("span",{staticClass:"titulo"},[t._v("Informe os parâmetros do projeto")]),a("div",{staticClass:"campos"},[a("div",{staticClass:"field",attrs:{title:"Define BDI"}},[t._v("\n          BDI:\n          "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.newparams.BDI,expression:"newparams.BDI",modifiers:{lazy:!0}}],staticStyle:{width:"70px"},attrs:{type:"number",step:"0.01",min:"0",max:"80"},domProps:{value:t.newparams.BDI},on:{change:function(e){return t.$set(t.newparams,"BDI",e.target.value)}}})]),a("div",{staticClass:"field",staticStyle:{position:"relative"},attrs:{title:"Seleciona Data Base da planilha"}},[t._v("\n          Data Base:\n          "),a("b-form-select",{attrs:{options:t.registros},model:{value:t.newparams.base,callback:function(e){t.$set(t.newparams,"base",e)},expression:"newparams.base"}})],1),a("div",{staticClass:"field"},[a("b-form-checkbox",{attrs:{size:"lg",switch:"",variant:"danger",value:"1","unchecked-value":"0"},model:{value:t.newparams.desonerado,callback:function(e){t.$set(t.newparams,"desonerado",e)},expression:"newparams.desonerado"}},[t._v("Desonerado")])],1)]),a("span",{staticClass:"titulo"},[t._v("Selecione uma planilha que tenha este layout de colunas")]),a("div",{staticClass:"table"},[a("div",{staticClass:"tr header"},[a("div",{staticClass:"td header"},[t._v("Item")]),a("div",{staticClass:"td header"},[t._v("Orgão")]),a("div",{staticClass:"td header"},[t._v("Código")]),a("div",{staticClass:"td header",staticStyle:{"min-width":"50px"}},[t._v("Descrição")]),a("div",{staticClass:"td header"},[t._v("Unid")]),a("div",{staticClass:"td header"},[t._v("Qtde")]),a("div",{staticClass:"td header"},[t._v("Valor Unit")]),a("div",{staticClass:"td header"},[t._v("Valor Total")])]),a("div",{staticClass:"tr",staticStyle:{"font-size":"12px"}},[a("div",{staticClass:"td"},[t._v("Sequenciamento dos Itens")]),a("div",{staticClass:"td"},[t._v("Orgão de referência")]),a("div",{staticClass:"td"},[t._v("Código de referência")]),a("div",{staticClass:"td",staticStyle:{"min-width":"50px"}},[t._v("Descrição do Item")]),a("div",{staticClass:"td"},[t._v("Unidade")]),a("div",{staticClass:"td"},[t._v("Qtde do Item")]),a("div",{staticClass:"td"},[t._v("Preço Unitário")]),a("div",{staticClass:"td"},[t._v("Preço Total")])])]),a("div",{staticClass:"d-block"},[a("b-form-file",{staticStyle:{"text-align":"left !important"},attrs:{id:"nomeplanilha",state:Boolean(t.file),placeholder:"Escolha a planilha a ser lida...",value:t.file},on:{change:function(e){return t.carregaArquivo()}},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),a("span",{staticClass:"titulo"},[t._v("Informe os dados da planilha")]),a("div",{staticClass:"camposplanilha"},[a("div",{staticClass:"field",attrs:{title:"Seleciona a guia da planilha"}},[t._v("\n            Nome da Guia:\n            "),a("b-form-select",{attrs:{options:t.guias},model:{value:t.guia,callback:function(e){t.guia=e},expression:"guia"}})],1),a("div",{staticClass:"field",attrs:{title:"Define Primeira linha com Itens"}},[t._v("\n            1 ª Linha:\n            "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.linha1,expression:"linha1"}],attrs:{type:"number",step:"1",min:"0",max:"80"},domProps:{value:t.linha1},on:{input:function(e){e.target.composing||(t.linha1=e.target.value)}}})]),a("div",{staticClass:"field",attrs:{title:"Define Primeira coluna com Itens"}},[t._v("\n            1 ª Coluna:\n            "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.coluna1,expression:"coluna1"}],staticStyle:{width:"50px !important"},attrs:{type:"text",maxlength:"1"},domProps:{value:t.coluna1},on:{input:function(e){e.target.composing||(t.coluna1=e.target.value)}}})])])],1),a("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"warning"},on:{click:function(e){return t.readSheet()}}},[t._v("Carregar")])],1)]),a("b-modal",{staticClass:"modalABC",attrs:{id:"modal-ABC",size:"xl",scrollable:"","hide-footer":"",centered:"",title:"Curva ABC","header-bg-variant":"info","body-bg-variant":"info"},on:{hide:t.closeABC},scopedSlots:t._u([{key:"modal-title",fn:function(){return[a("span",[t._v("Curva ABC")]),a("div",{attrs:{title:"Exporta Curva ABC em formato .xlsx"},on:{click:function(e){return t.onexport(t.arrayABC)}}},[a("i",{staticClass:"fa fa-file-excel-o fa-1x"}),a("i",{staticClass:"fa fa-long-arrow-down fa-1x"})])]},proxy:!0}])},[a("b-table",{attrs:{striped:"","header-variant":"info","table-variant":"success",fields:t.fields,small:t.small,items:t.arrayABC}})],1),a("b-modal",{attrs:{id:"modal_atualiza",centered:"","content-class":"shadow","header-bg-variant":"light","header-text-variant":"info","body-bg-variant":"light","body-text-variant":"danger","footer-bg-variant":"light",title:"Atualiza Itens"},on:{ok:function(e){return t.atualizaItens()}}},[a("p",{staticClass:"my-2"},[t._v("\n      Um dos parâmetros da planilha foi alterado !\n      Deseja atualizar os itens desta planilha com base nessa alteração?\n    ")])]),a("Progress",{attrs:{progressstate:t.progressstate,max:t.max}}),a("Loading",{attrs:{loading:t.lendo}})],1)}),n=[],l=(a("55dd"),a("34ef"),a("8615"),a("ac6a"),a("456d"),a("28a5"),a("75fc")),c=(a("96cf"),a("3b8d")),d=a("1146"),u=a.n(d),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.max>1,expression:"max>1"}],staticClass:"progresscard"},[a("b-progress",{staticClass:"progresso",attrs:{max:t.max,"show-progress":"",animated:"","show-value":"",variant:"warning",height:"2.5rem"}},[a("b-progress-bar",{staticClass:"td header",attrs:{value:t.progressstate}},[t._v("\n      Atualizando:\n      "),a("strong",[t._v(t._s(t.progressstate)+" / "+t._s(t.max))])])],1)],1)},p=[],v={name:"progresso",props:["progressstate","max"]},f=v,h=(a("679a"),a("2877")),g=Object(h["a"])(f,m,p,!1,null,null,null),b=g.exports,x=(a("a481"),a("6b54"),{methods:{criticaItem:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,s){var r,i,o,n,l,c,d,u,m,p,v,f,h,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=[],i=[],""!=e.codigo){t.next=3;break}return t.abrupt("return",JSON.stringify(r)+"||"+JSON.stringify(i));case 3:if(!(e.orgao.toString().toUpperCase().indexOf("COMP")>=0||"CCU"==e.orgao.toString().toUpperCase().replace(".",""))){t.next=5;break}return t.abrupt("return",JSON.stringify(r)+"||"+JSON.stringify(i));case 5:return o=e.codigo,n=a.desonerado,l=e.orgao,c=a.BDI,d=a.UF,u=e.base,m="codigo.asp?uf="+d+"&orgao="+l+"&base="+u+"&codigo="+o,t.next=14,s.$http.get(m).then((function(t){return t.data[0]}));case 14:if(p=t.sent,e.vlComBDI*e.qtd==0&&r.push({erro:"Item com Preço/Qtde zerada"}),""!=p&&void 0!=p){t.next=19;break}return r.push({erro:"Item não cadastrado nesse Orgão/Base/UF"}),t.abrupt("return",JSON.stringify(r)+"||"+JSON.stringify(i));case 19:return p.descr.toUpperCase()!==e.descr.toUpperCase()&&i.push({alerta:"Verifique a descrição do item"}),v=s.itens.filter((function(t){return t.codigo==e.codigo})),v.length>1&&(f=v[0].vlComBDI,h=s.itens.filter((function(t){return t.vlComBDI!==f&&e.codigo==t.codigo})),h.length>0&&r.push({erro:"Item repetido com valor diferente."})),g="",g="1"==n?parseFloat(p.precodeson*(1+c/100)).toFixed(2):parseFloat(p.precooner*(1+c/100)).toFixed(2),parseFloat(e.vlComBDI)>parseFloat(g)&&g>0&&r.push({erro:"Item com preço maior que a referência"}),parseFloat(e.vlComBDI)<parseFloat(.7*g)&&g>0&&i.push({alerta:"Item com preço menor que a 70% da referência"}),t.abrupt("return",JSON.stringify(r)+"||"+JSON.stringify(i)+"||"+g);case 27:case"end":return t.stop()}}),t)})));function e(e,a,s){return t.apply(this,arguments)}return e}()}}),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",{staticClass:"loading"},[a("i",{staticClass:"fa fa-spinner fa-pulse fa-3x fa-fw"}),a("span",[t._v("Carregando...")])]):t._e()},w=[],y={name:"loading",props:["loading"],create:function(){this.loading=!0}},_=y,I=(a("8e69"),Object(h["a"])(_,C,w,!1,null,null,null)),k=I.exports,O={name:"Params",components:{Loading:k,Progress:b},mixins:[x],data:function(){return{oldparams:"",file:[],emcima:!1,registros:[],showAlert:!1,newparams:{UF:"",base:"",desonerado:"1",BDI:""},fields:[{key:"Seq",sortable:!1},{key:"item",sortable:!0,label:"Item"},{key:"orgao",sortable:!1,label:"Órgão"},{key:"codigo",sortable:!1,label:"Código"},{key:"descr",sortable:!1,label:"Descrição"},{key:"unid",sortable:!1,label:"Unid"},{key:"qtd",sortable:!1,label:"Qtde"},{key:"vlComBDI",sortable:!0,label:"Preço Unit"},{key:"valortot",sortable:!0,label:"Preço Total"},{key:"Perc",sortable:!0,label:"%"},{key:"Acumulado",sortable:!0,label:"%Acum"}],small:!0,atualiza:"",arrayABC:[],linha1:7,coluna1:"A",lendo:!1,guia:"",max:0,progressstate:0,workbook:"",guias:[]}},methods:{toast:function(t,e){this.$bvToast.toast(t,{title:"Mensagem",toaster:"b-toaster-top-center",solid:!0,variant:e})},atualizaItens:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r,i,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=function(){return n=Object(c["a"])(regeneratorRuntime.mark((function t(o){var n,l,c,d,u,m,p,v,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<i.length)){t.next=36;break}if(o.progressstate=o.progressstate+1,l=i[n],l.erro=[],!(""!==l.orgao&&""!==l.codigo&&l.orgao.toUpperCase().indexOf("COMP")<0&&l.orgao.toUpperCase().indexOf("CCU")<0&&l.orgao.toUpperCase().indexOf("C.C.U")<0)){t.next=33;break}if(d=s,"SINAPI"===l.orgao.toUpperCase()){t.next=11;break}return t.next=10,o.$http.get("carregaorgao.asp?uf="+r+"&base="+s+"&orgao="+l.orgao).then((function(t){return t.data[0].base})).catch((function(t){return""}));case 10:d=t.sent;case 11:if(""===d){t.next=32;break}return c="codigo.asp?uf="+r+"&codigo="+l.codigo+"&base="+d+"&orgao="+l.orgao,t.next=15,o.$http.get(c).then((function(t){return t.data[0]}));case 15:return u=t.sent,void 0==u?(l.valor=0,l.valortot=""):l.valor="1"==a?parseFloat(u.precodeson*(1+e/100)).toFixed(2):parseFloat(u.precooner*(1+e/100)).toFixed(2),l.base=d,l.vlComBDI=l.valor,l.valortot=parseFloat(l.qtd*l.vlComBDI).toFixed(2),t.next=22,o.criticaItem(l,o.params,o);case 22:m=t.sent,p=m.split("||")[0],p&&(l.erro=JSON.parse(p)),v=m.split("||")[1],v&&(l.alerta=JSON.parse(v)),f=m.split("||")[2],f>0&&(l.valor=f),o.itens[n]=l,t.next=33;break;case 32:l.orgao.indexOf("COMP")>-1?l.composicao=!0:l.erro.push({erro:"Item não encontrado no orgão/data base"});case 33:n++,t.next=1;break;case 36:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)},o=function(t){return n.apply(this,arguments)},0!=this.itens.length){t.next=4;break}return t.abrupt("return");case 4:return e=this.params.BDI,a=this.params.desonerado,s=this.params.base,r=this.params.UF,i=Object(l["a"])(this.itens),this.max=i.length,t.next=12,o(this);case 12:this.itens=i,this.max=0,this.progressstate=0,this.toast("Itens atualizados com sucesso !","success");case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),confirmUpdate:function(){this.$bvModal.show("modal_atualiza")},gravabase:function(t){this.params.base=t.base,this.saveParams()},totalizaItens:function(){this.$store.commit("totalizaItens")},pesquisaBases:function(){if(void 0!=this.params.UF){var t="carregabase.asp?uf="+this.params.UF;return this.$http.get(t).then((function(t){var e=[];e.push({value:"",text:"Data Base"});for(var a=0;a<Object.keys(t.data).length;a++)e.push({value:t.data[a].base,text:t.data[a].base});return e}))}},saveParams:function(){this.$store.commit("gravaParams",this.params)},escolheArquivo:function(){""!=this.params.UF?this.$bvModal.show("modal-2"):this.toast("Selecione uma UF antes de importar planilhas !","danger")},salvaItens:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,s,r,i,o,n,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],this.max=e.length,s=parseInt(this.coluna1.toUpperCase().charCodeAt()-64),r=this.linha1-3;case 4:if(!(r<Object.keys(e).length-1)){t.next=30;break}return i={item:"",orgao:"",base:this.params.base,descr:"",unid:"",qtd:"",valor:"",erro:"",valortot:"",selecionado:!1,edita:!1,vlComBDI:0},i.item=Object.values(e[r])[s-1],i.orgao=Object.values(e[r])[s],i.codigo=Object.values(e[r])[s+1],i.descr=Object.values(e[r])[s+2],i.unid=Object.values(e[r])[s+3],i.qtd=Object.values(e[r])[s+4],""!==i.qtd&&(i.qtd=parseFloat(i.qtd).toFixed(2)),i.vlComBDI=Object.values(e[r])[s+5],""!==i.vlComBDI&&(i.vlComBDI=parseFloat(i.vlComBDI).toFixed(2)),i.valortot=Object.values(e[r])[s+6],t.next=18,this.criticaItem(i,this.params,this);case 18:o=t.sent,n=o.split("||")[0],n&&(i.erro=JSON.parse(n)),l=o.split("||")[1],l&&(i.alerta=JSON.parse(l)),c=o.split("||")[2],c>0&&void 0!==c&&(i.valor=c),"total"!==i.descr.toLowerCase()&&i.descr.toLowerCase().indexOf("sub-total")<0&&i.descr.toLowerCase().indexOf("subtotal")<0&&""!==i.descr&&a.push(i),this.progressstate=this.progressstate+1;case 27:r++,t.next=4;break;case 30:e=a,this.itens=e,this.$store.commit("gravaItens",e),this.$store.commit("calculatotal"),this.$forceUpdate(),this.max=0,this.progressstate=0;case 37:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),carregaArquivo:function(){var t=this,e=document.getElementById("nomeplanilha").files[0];if(""!=e){this.toast("Aguarde a leitura da planilha. Isso pode demorar um pouco...","primary"),this.lendo=!0,this.$forceUpdate(),this.$store.commit("gravaItens",[]),this.itens=[];var a=this;setTimeout((function(){t.carregaArquivocontinua(e,a)}),2500)}else alert("Selecione uma planilha !")},carregaArquivocontinua:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=function(){return i=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a="",s=0,r=10240;s<e.byteLength/r;++s)a+=String.fromCharCode.apply(null,new Uint8Array(e.slice(s*r,s*r+r)));return a+=String.fromCharCode.apply(null,new Uint8Array(e.slice(s*r))),t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)},r=function(t){return i.apply(this,arguments)},s=new FileReader,s.onload=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var s,i,o,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.target.result,a.lendo=!0,t.next=4,r(s);case 4:for(i=t.sent,o=u.a.read(btoa(i),{type:"base64"}),n=[],l=0;l<o.SheetNames.length;l++)n.push(o.SheetNames[l]);a.guias=n,a.workbook=o,a.lendo=!1,a.toast("Planilha carregada. Informe os dados da planilha...","success"),a.$forceUpdate();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.readAsArrayBuffer(e),this.params.BDI=this.newparams.BDI,this.params.base=this.newparams.base,this.params.desonerado=this.newparams.desonerado,this.saveParams();case 9:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),readSheet:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.newparams.BDI&&""!=this.newparams.base&&""!=this.guia){t.next=3;break}return this.toast("Informe Data Base e/ou BDI e/ou Nome da Guia","danger"),t.abrupt("return");case 3:e=this.workbook.Sheets[this.guia],a=u.a.utils.sheet_to_json(e,{defval:""}),this.salvaItens(a),this.$bvModal.hide("modal-2");case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),curvaABC:function(){if(!(this.itens.length<1)){var t=this.itens,e=[],a=[],s=parseFloat(this.$store.state.totvalor);this.itens.forEach((function(e,r){if(""!==e.codigo&&e.valortot>0&&JSON.stringify(a).indexOf('"Codigo":"'+e.codigo+'"')<0){var i=t.filter((function(t){return t.codigo==e.codigo})),o=i.reduce((function(t,e){return t+parseFloat(e.valortot)}),0),n=i.reduce((function(t,e){return t+parseFloat(e.qtd)}),0),l=(100*o.toFixed(2)/s).toFixed(2),c={Seq:"",item:e.item,orgao:e.orgao,codigo:e.codigo,descr:e.descr,unid:e.unid,qtd:n,vlComBDI:e.vlComBDI,valortot:o,Perc:l};a.push(c)}}));a=a.sort((function(t,e){return t.valortot>e.valortot?-1:t.Vl_valortotTotal<e.valortot?1:void 0}));var r=0,i=1;e=a.map((function(t){t.Seq=i++,r+=parseFloat(t.Perc);var e="";return r<81&&(e="danger"),t._rowVariant=e,t.Acumulado=r.toFixed(0),t})),e=e.filter((function(t){return t.Acumulado<100})),this.arrayABC=e,this.$bvModal.hide("modal-ABC"),this.$bvModal.show("modal-ABC")}},onexport:function(t){var e=[];t.forEach((function(t,a){var s={Item:t.item,Orgao:t.orgao,Codigo:t.codigo,Descrico:t.descr,Unid:t.unid,Qtd:t.qtd,"PrecoUnitário":t.vlComBDI,PrecoTotal:t.valortot};e.push(s)}));var a=u.a.utils.json_to_sheet(e),s=u.a.utils.book_new();u.a.utils.book_append_sheet(s,a,"Itens");var r=[{wpx:40},{wpx:70},{wpx:70},{wpx:450},{wpx:50},{wpx:40},{wpx:70},{wpx:90},{hidden:!0}];a["!cols"]=r,u.a.writeFile(s,"book.xlsx")},limpaPlanilha:function(){var t=this;confirm("Deseja apagar os dados desta planilha ?")&&(this.$store.commit("gravaParams",{BDI:"",UF:"",base:"",desonerado:""}),this.$store.commit("gravaItens",[]),setTimeout((function(){t.$store.commit("calculatotal")}),1e3,this))},closeABC:function(){this.arrayABC=[],this.$bvModal.hide("modal-ABC")}},beforeMount:function(){this.oldparams=JSON.stringify(this.params)},watch:{params:{handler:function(t){this.oldparams.indexOf('"UF":""')<0&&JSON.stringify(t)!==this.oldparams&&""!==t.UF&&this.itens.length>0&&this.$bvModal.show("modal_atualiza"),this.oldparams=JSON.stringify(this.params)},deep:!0}},computed:{params:function(){return this.$store.state.params},itens:function(){return this.$store.state.itens}},asyncComputed:{bases:function(){var t=this;if(void 0==this.params.UF||this.params.UF.length<2)return"";var e="carregabase.asp?uf="+this.params.UF;return this.$http.get(e).then((function(e){for(var a=[],s=0;s<Object.keys(e.data).length;s++)a.push({value:e.data[s].base,text:e.data[s].base});return t.registros=a,a}))}}},S=O,B=(a("e26a"),Object(h["a"])(S,o,n,!1,null,null,null)),P=B.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"divGrid"},[a("keep-alive",[a("Item")],1)],1)},D=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"conteudoGrid",class:{zoom:t.zoom}},[a("div",{staticClass:"table"},[a("div",{staticClass:"tr header",on:{dblclick:function(e){t.zoom=!t.zoom}}},[a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Item")]),a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Orgão")]),a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Código")]),a("div",{staticClass:"td header",staticStyle:{width:"30% !important"}},[t._v("Descrição")]),a("div",{staticClass:"td header",staticStyle:{width:"5% !important"}},[t._v("Unid")]),a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Qtde ")]),a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Valor Unit")]),a("div",{staticClass:"td header",staticStyle:{width:"9% !important"}},[t._v("Valor Total")]),a("div",{staticClass:"td header",staticStyle:{width:"10% !important"}},[a("div",{staticClass:"acao"},[a("i",{staticClass:"fa fa-times-circle-o text-danger fa-1x",class:{filtrado:t.mostraerro},on:{click:function(e){t.mostraalerta=!1,t.mostraerro=!t.mostraerro}}}),a("i",{staticClass:"fa fa-exclamation-circle text-warning",class:{filtrado:t.mostraalerta},on:{click:function(e){t.mostraerro=!1,t.mostraalerta=!t.mostraalerta}}}),a("i",{staticClass:"fa fa-plus-square fa-1x text-light",attrs:{title:"Inserir Item"},on:{click:function(e){return t.addRow()}}})])])]),t._l(t.itens,(function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mostraerro&&!t.mostraalerta||t.mostraerro&&e.erro.length>0||t.mostraalerta&&e.alerta.length>0,expression:"!mostraerro&&!mostraalerta||(mostraerro&&item.erro.length>0)||(mostraalerta&&item.alerta.length>0)"}],key:s,ref:"tr-"+s,refInFor:!0,staticClass:"tr",class:{composicao:e.composicao,erro:e.erro.length,LinhaPar:s%2==0,Selected:e.selecionado,alerta:e.alerta.length,Grupo:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI,Totais:e.descr.indexOf("Total")>-1&&""!==e.codigo},attrs:{id:"linha"+s},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.saiSemGravar(e)},click:function(e){return t.selecionaItem(s)}}},[a("div",{staticClass:"td"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item,expression:"item.item"}],class:{editavel:e.edita},attrs:{type:"text",disabled:!e.edita},domProps:{value:e.item},on:{input:function(a){a.target.composing||t.$set(e,"item",a.target.value)}}})])]),a("div",{staticClass:"td"},[a("div",{class:{hide:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI&&!e.add}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orgao,expression:"item.orgao"}],ref:"itm-"+s,refInFor:!0,class:{editavel:e.edita},attrs:{type:"text",disabled:!e.edita},domProps:{value:e.orgao},on:{input:[function(a){a.target.composing||t.$set(e,"orgao",a.target.value)},t.pesquisaOrgaos]}}),a("Autocomplete",{class:{emcima:t.emcima,autocompleteAtivo:e.edita},attrs:{campo1:0,campo2:1,arrayRegistros:t.registrosOrgao},on:{retorno:function(e){return t.selecionaOrgao(e)}}})],1)]),a("div",{staticClass:"td"},[a("div",{class:{hide:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI&&!e.add}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.codigo,expression:"item.codigo"}],class:{editavel:e.edita},attrs:{type:"text",id:"codigo",disabled:!e.edita},domProps:{value:e.codigo},on:{change:t.codigo,input:function(a){a.target.composing||t.$set(e,"codigo",a.target.value)}}})])]),a("div",{staticClass:"td"},[a("div",{staticClass:"descricao"},[a("b-form-textarea",{class:{editavel:e.edita},staticStyle:{"text-align":"left"},attrs:{tabindex:"0",disabled:!e.edita,rows:"1","max-rows":"6",title:"Selecione um Órgão para pesquisar itens"},on:{input:function(e){return t.pesquisa(e)}},model:{value:e.descr,callback:function(a){t.$set(e,"descr",a)},expression:"item.descr"}}),Object.keys(t.ItensPesquisados).length?a("ul",{ref:"auto",refInFor:!0,staticClass:"autocomplete",class:{emcima:t.emcima,autocompleteAtivo:e.edita}},t._l(t.ItensPesquisados,(function(e,s){return a("li",{key:s,staticClass:"itenLi",attrs:{tabindex:"-1"},on:{click:function(a){return t.selecItemPesquisado(e)}}},[a("textarea",{attrs:{type:"text"},domProps:{value:e.descr},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.selecItemPesquisado(e)}}})])})),0):t._e()],1)]),a("div",{staticClass:"td"},[a("div",{class:{hide:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI&&!e.add}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.unid,expression:"item.unid"}],class:{editavel:e.edita},attrs:{type:"text",disabled:!e.edita},domProps:{value:e.unid},on:{input:function(a){a.target.composing||t.$set(e,"unid",a.target.value)}}})])]),a("div",{staticClass:"td"},[a("div",{class:{hide:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI&&!e.add}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.qtd,expression:"item.qtd"}],ref:"qtd-"+s,refInFor:!0,class:{editavel:e.edita},attrs:{type:"number",disabled:!e.edita},domProps:{value:e.qtd},on:{change:function(t){return e.qtd.replace(",",".")},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.gravaItem(a,e)},input:function(a){a.target.composing||t.$set(e,"qtd",a.target.value)}}})])]),a("div",{staticClass:"td"},[a("div",{class:{hide:""==e.orgao&&""==e.codigo&&""==e.unid&&""==e.qtd&&""==e.vlComBDI&&!e.add}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.vlComBDI,expression:"item.vlComBDI"}],class:{editavel:e.edita},attrs:{type:"text",disabled:!e.edita},domProps:{value:e.vlComBDI},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.gravaItem(a,e)},input:function(a){a.target.composing||t.$set(e,"vlComBDI",a.target.value)}}})])]),a("div",{staticClass:"td",attrs:{title:"Valor Total do Item"}},[a("span",[t._v(t._s(parseFloat(e.valortot)>0?e.valortot:""))])]),a("div",{staticClass:"td"},[a("div",{staticClass:"acoes"},[1==e.edita?a("div",{attrs:{title:"Grava Item"},on:{click:function(a){return t.gravaItem(a,e)}}},[a("i",{staticClass:"fa fa-check-square-o text-success"})]):t._e(),1==e.edita?a("div",{attrs:{title:"Sai sem gravar Item"},on:{click:function(a){return t.saiSemGravar(e)}}},[a("i",{staticClass:"fa fa-times text-secondary"})]):t._e(),0==e.edita?a("div",{attrs:{title:"Edita Item"},on:{click:function(a){return t.editaItem(e)}}},[a("i",{staticClass:"fa fa-edit text-info"})]):t._e(),0==e.edita?a("div",{attrs:{title:"Exclui Item"},on:{click:function(a){return t.excluiItem(e)}}},[a("i",{staticClass:"fa fa-trash text-danger"})]):t._e(),a("div",{attrs:{title:"Crítica Item",id:"info-"+s}},[""!==e.orgao&&""!==e.codigo?a("i",{staticClass:"fa fa-info-circle text-primary"}):t._e()])])]),a("b-popover",{attrs:{target:"info-"+s,triggers:"hover",placement:"left",variant:"info"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Detalhes do Item")]},proxy:!0}],null,!0)},[a("b-row",{staticClass:"infoItem"},[a("div",[a("strong",[t._v(" Item : ")]),a("span",[t._v(" "+t._s(e.item))])]),a("div",[a("strong",[t._v(" Orgão :")]),t._v(" "+t._s(e.orgao)+"\r\n          ")]),a("div",[a("strong",[t._v("Data Base : ")]),t._v(t._s(e.base.toUpperCase())+"\r\n          ")]),a("div",[a("strong",[t._v("Código : ")]),t._v(t._s(e.codigo)+"\r\n          ")]),a("div",[a("strong",[t._v("Unid : ")]),t._v(t._s(e.unid)+"\r\n          ")]),a("div",[a("strong",[t._v("Qtde :")]),t._v(" "+t._s(e.qtd)+"\r\n          ")]),a("div",[a("strong",[t._v("Preço Referencial : ")]),t._v(t._s(isNaN(e.valor)||0==e.valor?"":e.valor)+"\r\n          ")]),a("div",[a("strong",[t._v("Preço Unitário : ")]),t._v(t._s(isNaN(e.vlComBDI)||0==e.vlComBDI?"":e.vlComBDI)+"\r\n          ")]),a("div",[a("strong",[t._v("Preço Total : ")]),t._v(t._s(parseFloat(e.valortot)>0?e.valortot:"")+"\r\n          ")])]),a("b-row",{staticClass:"infoItem"},[a("div",[a("strong",[t._v("Descrição : ")]),t._v(t._s(e.descr)+"\r\n          ")])]),e.erro.length?a("b-row",{staticClass:"infoItem"},[a("div",[a("strong",[t._v("Erros : ")]),t._v(t._s(e.erro.length)),a("br"),t._l(e.erro,(function(e,s){return a("div",{key:s,staticClass:"infoErro"},[a("i",{staticClass:"fa fa-thumbs-down text-danger fa-2x"}),t._v("\r\n                 "+t._s(e.erro)+"\r\n            ")])}))],2)]):t._e(),e.alerta.length?a("b-row",{staticClass:"infoItem"},[a("div",[a("strong",[t._v("Avisos : ")]),t._v(t._s(e.alerta.length)),a("br"),t._l(e.alerta,(function(e,s){return a("div",{key:s,staticClass:"infoErro"},[a("i",{staticClass:"fa fa-exclamation-triangle text-warning fa-2x"}),t._v("\r\n                 "+t._s(e.alerta)+"\r\n            ")])}))],2)]):t._e()],1)],1)}))],2),a("Loading",{attrs:{loading:t.loading}})],1)},q=[],U=(a("3b2b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{directives:[{name:"show",rawName:"v-show",value:t.registros.length,expression:"registros.length"}],staticClass:"autocomplete",class:{left:t.left},staticStyle:{width:"8vw !important"}},t._l(t.registros,(function(e,s){return a("li",{key:s,attrs:{tabindex:s-1},on:{click:function(e){return t.selecionaItem(s)}}},[a("textarea",{domProps:{value:Object.values(e)[t.campo1]+" | "+Object.values(e)[t.campo2]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selecionaItem(s)}}})])})),0)}),A=[],j={name:"autocomplete",props:["arrayRegistros","campo1","campo2","left"],data:function(){return{exibe:!1}},methods:{selecionaItem:function(t){this.$emit("retorno",this.registros[t]),this.registros.length=0,this.$forceUpdate()}},computed:{registros:function(){return this.arrayRegistros}}},N=j,R=(a("6da4"),Object(h["a"])(N,U,A,!1,null,null,null)),E=R.exports,z={name:"itensPlanilha",components:{Autocomplete:E,Loading:k},props:[],mixins:[x],data:function(){return{zoom:!1,add:!1,emcima:!1,jafoi:!1,BDI:"",orgao:"",base:"",UF:"",desonerado:"",orgaos:[],bases:[],descr:"",ItensPesquisados:[],registrosBase:"",registrosOrgao:[],focus:99,mostraerro:!1,mostraalerta:!1}},methods:{editaItem:function(t){this.itens.map((function(t){return t.edita=!1})),this.selecionado=t.id,t.edita=!0;var e=this;setTimeout((function(){var a=document.querySelector(".conteudoGrid").clientHeight;a+=document.querySelector(".conteudoGrid").getBoundingClientRect().y;var s=document.querySelector("#linha"+t.id),r=s.getBoundingClientRect().y;r>a-100&&(e.emcima=!0)}),300,t)},chamaItens:function(){this.$bvModal.show("modal-itens")},toast:function(t,e){this.$bvToast.toast(t,{title:"Mensagem",toaster:"b-toaster-top-center",solid:!0,variant:e})},naoedita:function(t){""==t.descr&&setTimeout((function(){t.edita=!1}),1e3),this.ItensPesquisados=[]},selecionaOrgao:function(t){this.itens[this.selecionado].orgao=t.orgao,this.itens[this.selecionado].base=t.base,this.registrosOrgao=[]},codigo:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,s,r,i,o,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.type,s=e.target,"change"!=a){t.next=19;break}return r=this.itens[this.selecionado],i=this.params.BDI,o="codigo.asp?uf="+this.params.UF+"&codigo="+s.value+"&base="+this.itens[this.selecionado].base+"&orgao="+this.itens[this.selecionado].orgao,t.next=7,this.$http.get(o).then((function(t){return t.data[0]}));case 7:if(n=t.sent,""!=n&&void 0!=n){t.next=10;break}return t.abrupt("return","");case 10:l=0,l=1==this.params.desonerado?n.precodeson:n.precooner,r.valor=l,r.unid=n.unid,r.descr=n.descr,r.vlComBDI=parseFloat(l*(1+i/100)).toFixed(2),r.valortot=parseFloat(r.vlComBDI*r.qtd).toFixed(2),this.$refs["qtd-"+this.selecionado][0].focus(),this.$forceUpdate();case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),pesquisaOrgaos:function(t){var e=this,a=t.target;if(!(a.value.length<4)&&""!=this.itens[this.selecionado].orgao){var s=this.params.base;this.$http.get("carregaorgao.asp?uf="+this.params.UF+"&orgao="+a.value+"&base="+s).then((function(t){var a=[],r=!1;JSON.stringify(t.data).toLowerCase().indexOf(s.toLowerCase())>0&&(r=!0);for(var i=0;i<Object.keys(t.data).length;i++)r&&t.data[i].base==s&&a.push(t.data[i]),r||t.data[i].base===s||a.push(t.data[i]),a.length>0&&(i=Object.keys(t.data).length);e.registrosOrgao=a,e.$forceUpdate()}))}},removeAcento:function(t){return t=t.toLowerCase(),t=t.replace(new RegExp("[ÁÀÂÃ]","gi"),"a"),t=t.replace(new RegExp("[ÉÈÊ]","gi"),"e"),t=t.replace(new RegExp("[ÍÌÎ]","gi"),"i"),t=t.replace(new RegExp("[ÓÒÔÕ]","gi"),"o"),t=t.replace(new RegExp("[ÚÙÛ]","gi"),"u"),t=t.replace(new RegExp("[Ç]","gi"),"c"),t},pesquisa:function(t){var e=this,a=t.toString();if(!(a.length<6)){this.$store.commit("setLoading",!0);var s="descricao.asp?uf="+this.params.UF+"&descr="+this.removeAcento(a)+"&orgao="+this.itens[this.selecionado].orgao+"&base="+this.itens[this.selecionado].base;this.$http.get(s).then((function(t){e.ItensPesquisados=t.data,e.$store.commit("setLoading",!1),e.$forceUpdate()}))}},selecItemPesquisado:function(t){this.itens[this.selecionado].orgao=t.orgao,this.itens[this.selecionado].codigo=t.codigo,this.itens[this.selecionado].descr=t.descr,this.itens[this.selecionado].base=t.base,"1"==this.params.desonerado?this.itens[this.selecionado].valor=t.precodeson:this.itens[this.selecionado].valor=t.precooner,this.itens[this.selecionado].unid=t.unid,this.itens[this.selecionado].vlComBDI=parseFloat(this.itens[this.selecionado].valor*(1+this.params.BDI/100)).toFixed(2),this.$bvModal.hide("modal-1"),this.$refs["qtd-"+this.selecionado][0].focus(),this.ItensPesquisados=[]},selecionaItem:function(t){this.itens.forEach((function(t){t.selecionado=!1})),t>=this.itens.length&&(t=this.itens.length-1),this.itens[t].selecionado=!0,this.selecionado=t,this.add=!1,this.$forceUpdate()},saiSemGravar:function(t){t.edita=!1;var e=t.id;this.ItensPesquisados=[],this.registrosOrgao=[],this.jafoi=!1,this.emcima=!1,""==t.descr&&this.itens.splice(e,1),this.$store.commit("calculatotal")},gravaItem:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("codigo"!=e.srcElement.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.criticaItem(a,this.params,this);case 4:s=t.sent,a.erro=JSON.parse(s.split("||")[0]),a.alerta=JSON.parse(s.split("||")[1]),r=s.split("||")[2],""==a.valor&&void 0!==r&&(a.valor=s.split("||")[2]),this.$store.commit("gravaItens",this.itens),i=a.id,this.selecionado=i,a.add&&(this.addRow(),this.add=!1),a.edita=!1,a.add=!1,this.ItensPesquisados=[],this.$store.commit("calculatotal"),this.$forceUpdate();case 18:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),excluiItem:function(t){var e=t.id;this.itens.splice(e,1),this.$store.commit("gravaItens",this.itens),localStorage.setItem("itens",JSON.stringify(this.itens)),this.$store.commit("calculatotal")},consulta:function(){var t=this;this.$http.get("carregaorgao.asp?uf=ES").then((function(e){t.orgaos=e.data,t.orgao="Escolha o Orgão"})),this.$http.get("carregabase.asp?uf="+this.UF).then((function(e){t.bases=e.data})),this.$bvModal.show("modal-1")},addRow:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.mostraerro&&!this.mostraalerta){t.next=3;break}return alert("Desative os filtros de Erro/Alerta para inserir itens"),t.abrupt("return");case 3:if(void 0!=this.params.base&&""!=this.params.base){t.next=6;break}return alert("É necessário selecionar uma Data Base para inserir itens"),t.abrupt("return");case 6:if(!(this.itens.length>1&&void 0==this.selecionado)){t.next=9;break}return alert("Selecione um item para inserir outro item apos este !"),t.abrupt("return");case 9:if(this.$forceUpdate(),this.add=!0,e=0,a={id:"",item:"",orgao:"",codigo:"",base:this.params.base,descr:"",unid:"",qtd:"",valor:"",valortot:"",selecionado:!0,edita:!0,vlComBDI:0,add:!0,erro:[],alerta:[]},this.itens.length>0)e=this.selecionado,a.id=e+1,a.edita=!0,a.base=this.itens[e].base,a.orgao=this.itens[e].orgao,this.itens.splice(e+1,0,a),this.selecionado=e+1;else for(this.itens.push(a),s=1;s<this.itens.length;s++)this.item.id=s;this.selecionado=e+1,this.jafoi=!0,this.emcima=!1,setTimeout((function(){var t=r.$refs["tr-"+r.selecionado][0];document.querySelector("#app > div.conteudo > div.grid").scrollTop=t.offsetTop-200}),200);case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;setTimeout((function(){t.selecionado=0}),1500)},watch:{itens:{handler:function(t){this.$store.commit("calculatotal")},deep:!0}},mounted:function(){},computed:{loading:function(){return this.$store.state.loading},itens:function(){return this.$store.state.itens},params:function(){return this.$store.state.params}}},T=z,L=(a("6b5e"),Object(h["a"])(T,F,q,!1,null,null,null)),J=L.exports,M={name:"itens",components:{Item:J},data:function(){return{}},computed:{itens:function(){return this.$store.state.itens}},mounted:function(){},methods:{}},G=M,V=(a("d812"),Object(h["a"])(G,$,D,!1,null,null,null)),Q=V.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"resumo"},[a("div",{staticClass:"contato text-info"},[a("i",{staticClass:"fa fa-envelope fa-2x",staticStyle:{cursor:"default !important"}}),t._v("\n     "+t._s(t.contato)+"\n  ")]),a("div",{staticClass:"tutoriais"},[a("i",{staticClass:"fa fa-search",on:{click:t.showIframe}}),t._v("\n    Pesquisa Itens\n  ")]),a("div",{staticClass:"total text-danger"},[a("span",[t._v("Total de Itens:"+t._s(t.itens.length))]),a("span",[t._v("Total Orçamento: "+t._s(t.valortotal.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")))])]),t.iframeWeb?a("div",{staticClass:"iframe"},[t._m(0),a("b-embed",{attrs:{type:"iframe",aspect:"21by9",src:"http://www.netshake.net.br/itensreferencia",allowfullscreen:""}})],1):t._e(),t.iframeIntranet?a("div",{staticClass:"iframe"},[t._m(1),a("b-embed",{attrs:{type:"iframe",aspect:"21by9",src:"http://www.gigovvt.es.caixa/itensreferencia",allowfullscreen:""}})],1):t._e()])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("\n      Clique no ícone\n      "),a("i",{staticClass:"fa fa-search"}),t._v("' Pesquisa Itens' para sair\n    ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v("\n      Clique no ícone\n      "),a("i",{staticClass:"fa fa-search"}),t._v("' Pesquisa Itens' para sair\n    ")])}],K={name:"rodape",data:function(){return{iframeWeb:!1,iframeIntranet:!1}},methods:{showIframe:function(){var t=location.host;t.indexOf("localhost:8082")>-1||t.indexOf("www.gigovvt")>-1?this.iframeIntranet=!this.iframeIntranet:this.iframeWeb=!this.iframeWeb}},mounted:function(){this.$store.commit("calculatotal");var t=this;window.addEventListener("keypress",(function(e){27==e.keyCode&&(e.stopPropagation(),t.iframeIntranet=!1,t.iframeWeb=!1)}))},computed:{valortotal:function(){return isNaN(parseFloat(this.$store.state.totvalor))?0:parseFloat(this.$store.state.totvalor)},itens:function(){return this.$store.state.itens.filter((function(t){return""!==t.codigo&&""!==t.orgao?t:""}))},contato:function(){return this.$local.indexOf("www.gigovvt")>-1?"carlos.m.borges@caixa.gov.br":"contato@planilhadeobra.site"}}},X=K,Y=(a("bc42"),Object(h["a"])(X,W,H,!1,null,null,null)),Z=Y.exports,tt={name:"app",components:{Params:P,Grid:Q,Rodape:Z},data:function(){return{showAlert:!1,browser:""}},methods:{guardaAlerta:function(){localStorage.setItem("guardaAlerta",!0),this.guardaAlerta=!1}},mounted:function(){localStorage.getItem("guardaAlerta")&&(this.guardaAlerta=localStorage.getItem("guardaAlerta")),localStorage.getItem("itens")&&this.$store.commit("gravaItens",JSON.parse(localStorage.getItem("itens"))),localStorage.getItem("params")&&this.$store.commit("gravaParams",JSON.parse(localStorage.getItem("params")));var t=this.$el.querySelector(".grid");function e(){var t,e=navigator.userAgent,a=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:t[1]||""}):"Chrome"===a[1]&&(t=e.match(/\bOPR\/(\d+)/),null!=t)?{name:"Opera",version:t[1]}:(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&a.splice(1,1,t[1]),{name:a[0],version:a[1]})}if(setTimeout((function(){t.scrollTop=t.scrollHeight}),1500),"true"!==this.guardaAlerta){var a=e();this.browser=a,("Chrome"==a.name&&parseInt(a.version)<62||"Firefox"==a.name&&parseInt(a.version)<58||"Opera"==a.name&&parseInt(a.version)<61)&&(this.showAlert=!0)}},computed:{local:function(){return this.$local}}},et=tt,at=(a("034f"),Object(h["a"])(et,r,i,!1,null,null,null)),st=at.exports,rt=(a("7f10"),a("f9e3"),a("2dd8"),a("5f5b")),it=a("2f62"),ot=a("bc3a"),nt=a.n(ot);s["default"].use(it["a"]),s["default"].use(nt.a);var lt=new it["a"].Store({axios:nt.a,state:{itens:[],loading:!1,params:[{BDI:"",UF:"",base:"",desonerado:"1"}],baseURL:"",totvalor:"",atualiza:!1,disparaAtualizacao:!1,inicio:!1},mutations:{setLoading:function(t,e){t.loading=e},gravaParams:function(t,e){t.params=e;var a={UF:e.UF,base:e.base,desonerado:e.desonerado,BDI:e.BDI};localStorage.setItem("params",JSON.stringify(a))},totalizaItens:function(t){var e=t.itens;if(e){var a=0,s=0;e=e.filter((function(t){return t.descr.indexOf("Total")<0&&""!==t.descr?t:""}));for(var r=0,i=0;i<e.length;i++)if(e[i].edita=!1,""!==e[i].valor&&(e[i].vlComBDI=parseFloat(e[i].valor*(1+t.params.BDI/100)).toFixed(2),e[i].valortot=parseFloat(e[i].qtd*e[i].vlComBDI).toFixed(2)),""==e[i].unid&&""==e[i].codigo){if(e[i].item=parseInt(a)+1,a=e[i].item+".0",s){var o={item:"",orgao:"",base:"",descr:"SubTotal",unid:"",qtd:"",valor:"",valortot:parseFloat(s).toFixed(2),selecionado:!0,edita:!1,erro:[],alerta:[]};e.splice(i,0,o),s=0,i++}}else{var n=3;parseInt(a)>9&&(n=4),a=(parseFloat(a)+.01).toPrecision(n),e[i].item=a,s+=e[i].qtd*e[i].vlComBDI,r+=e[i].qtd*e[i].vlComBDI}if(s){o={item:"",orgao:"",base:"",descr:"SubTotal",unid:"",qtd:"",valor:"",valortot:parseFloat(s).toFixed(2),selecionado:!0,edita:!1,erro:[],alerta:[]},e.splice(i,0,o),i++;var l={item:"",orgao:"",base:"",descr:"Total Geral",unid:"",qtd:"",valor:"",valortot:parseFloat(r).toFixed(2),selecionado:!0,edita:!1,erro:[],alerta:[]};e.splice(i,0,l)}t.itens=e,localStorage.setItem("itens",JSON.stringify(e))}},calculatotal:function(t){var e=t.itens;e=e.filter((function(t){return t.descr.indexOf("Total")<0&&""!==t.descr?t:""}));var a=e.reduce((function(t,e){return"Total"===e.descr||isNaN(parseFloat(e.valortot))||(t+=parseFloat(e.valortot)),t}),0);t.totvalor=a},gravaItens:function(t,e){if(e){e=e.filter((function(t){return t.descr.toLowerCase().indexOf("subtotal")?t:""}));var a=0;e=e.map((function(t){return t.valortot=parseFloat(t.qtd*t.vlComBDI).toFixed(2),t.id=a,a++,t})),t.itens=e,localStorage.setItem("itens",JSON.stringify(e))}else localStorage.removeItem("itens")}}});nt.a.defaults.baseURL="http://www.netshake.net.br/obra/asp/";var ct=location.host;"localhost:8082"==ct&&(nt.a.defaults.baseURL="http://www.gigovvt.es.caixa/obra/asp/"),"www.gigovvt.des.es.caixa"==ct&&(nt.a.defaults.baseURL="http://www.gigovvt.es.caixa/obra/asp/"),"www.gigovvt.es.caixa"==ct&&(nt.a.defaults.baseURL="http://www.gigovvt.es.caixa/obra/asp/"),s["default"].use({install:function(t){t.prototype.$http=nt.a,t.prototype.$local=ct}});var dt=a("3003"),ut=a("edbf"),mt=a("660e");s["default"].use(mt["a"],{breakpoints:{sm:1024,md:1250,lg:1/0},defaultBreakpoint:"sm"}),s["default"].use(ut["a"]),s["default"].use(dt["a"]),s["default"].use(rt["a"]),s["default"].config.productionTip=!1,new s["default"]({store:lt,render:function(t){return t(st)}}).$mount("#app")},"626a5":function(t,e,a){t.exports=a.p+"img/pcipay-fred.f0c547a2.png"},"62f2":function(t,e,a){t.exports=a.p+"img/logo-GIGOV-200x168.770be14d.png"},"64a9":function(t,e,a){},"673e":function(t,e,a){},"679a":function(t,e,a){"use strict";var s=a("ebbb"),r=a.n(s);r.a},"6b5e":function(t,e,a){"use strict";var s=a("4212"),r=a.n(s);r.a},"6da4":function(t,e,a){"use strict";var s=a("38b6"),r=a.n(s);r.a},"6ff5":function(t,e,a){t.exports=a.p+"img/reuni.595b668e.png"},"7a16":function(t,e,a){},"8c21":function(t,e,a){t.exports=a.p+"img/banner3.3db659ac.jpg"},"8e69":function(t,e,a){"use strict";var s=a("e823"),r=a.n(s);r.a},a6f6:function(t,e,a){t.exports=a.p+"img/picpay.50314b0b.png"},ba57:function(t,e,a){t.exports=a.p+"img/banner1.81c22b85.jpg"},bc42:function(t,e,a){"use strict";var s=a("673e"),r=a.n(s);r.a},bc5c:function(t,e,a){t.exports=a.p+"img/pdo-logo.91d39546.png"},d812:function(t,e,a){"use strict";var s=a("0c36"),r=a.n(s);r.a},e26a:function(t,e,a){"use strict";var s=a("7a16"),r=a.n(s);r.a},e823:function(t,e,a){},ebbb:function(t,e,a){}});
//# sourceMappingURL=app.bee60285.js.map